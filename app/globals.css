@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Added scrollbar-hide utility for carousel */
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}

@layer base {
  :root {
    /* Aesthetic warm mode with orange accent and proper ADA contrast */
    --background: 43 67% 94%; /* #FAF4E5 - warm cream background */
    --foreground: 20 14% 20%; /* Dark brown text - 10.5:1 contrast */
    --card: 0 0% 100%;
    --card-foreground: 20 14% 20%;
    --popover: 0 0% 100%;
    --popover-foreground: 20 14% 20%;
    --primary: 25 85% 50%; /* Orange primary accent */
    --primary-foreground: 0 0% 100%;
    --secondary: 39 40% 85%;
    --secondary-foreground: 20 14% 20%;
    --muted: 39 30% 90%;
    --muted-foreground: 20 14% 45%; /* 5.5:1 contrast ratio */
    --accent: 25 85% 50%; /* Orange accent */
    --accent-foreground: 0 0% 100%;
    --destructive: 0 84% 50%;
    --destructive-foreground: 0 0% 100%;
    --border: 39 20% 80%;
    --input: 39 20% 80%;
    --ring: 25 85% 50%; /* Orange focus ring */
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;
    --sidebar-background: 44 38% 97%;
    --sidebar-foreground: 20 14% 20%;
    --sidebar-primary: 25 85% 50%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 39 40% 90%;
    --sidebar-accent-foreground: 20 14% 20%;
    --sidebar-border: 39 20% 80%;
    --sidebar-ring: 25 85% 50%;

    --font-serif: var(--font-playfair);
  }

  .dark {
    /* Warm dark grey + gold palette for dark mode - consistent with Secret Sauce brand */
    --background: 36 16% 7%;       /* #181813 - warm dark grey */
    --foreground: 45 42% 87%;      /* #e8dcc4 - warm gold-cream text */
    --card: 36 14% 11%;            /* #1f1e1a - slightly lighter warm grey */
    --card-foreground: 45 42% 87%;
    --popover: 36 14% 11%;
    --popover-foreground: 45 42% 87%;
    --primary: 45 60% 74%;         /* polished gold */
    --primary-foreground: 36 16% 7%;
    --secondary: 36 12% 18%;       /* deep warm grey */
    --secondary-foreground: 45 42% 87%;
    --muted: 36 10% 22%;           /* softened warm grey */
    --muted-foreground: 45 32% 72%; /* desaturated gold */
    --accent: 45 60% 74%;
    --accent-foreground: 36 16% 7%;
    --destructive: 0 70% 46%;
    --destructive-foreground: 45 42% 87%;
    --border: 45 20% 20%;          /* warm grey border with gold tint */
    --input: 36 14% 16%;           /* warm grey input background */
    --ring: 45 62% 72%;            /* gold focus ring */
    --chart-1: 210 60% 48%;
    --chart-2: 150 45% 42%;
    --chart-3: 45 70% 60%;
    --chart-4: 280 55% 58%;
    --chart-5: 350 60% 55%;
    --sidebar-background: 36 14% 11%;
    --sidebar-foreground: 45 42% 87%;
    --sidebar-primary: 45 60% 74%;
    --sidebar-primary-foreground: 36 16% 7%;
    --sidebar-accent: 36 12% 20%;
    --sidebar-accent-foreground: 45 42% 87%;
    --sidebar-border: 45 18% 20%;
    --sidebar-ring: 45 62% 72%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }

  /* Enhanced focus states for better accessibility */
  *:focus-visible {
    @apply outline-2 outline-offset-2 outline-ring;
  }

  /* Respect user's motion preferences */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Accessibility overrides for legacy warm-tone utility classes in dark theme */
  html.dark .bg-\[\#181813\],
  html.dark .bg-\[\#1a1a1a\] {
    background-color: hsl(var(--background)) !important;
  }

  html.dark .bg-\[\#1f1e1a\],
  html.dark .bg-\[\#0a0a0a\] {
    background-color: hsl(var(--card)) !important;
  }

  html.dark .text-\[\#e8dcc4\],
  html.dark .text-\[\#e8dcc4\]\/80,
  html.dark .hover\:text-\[\#e8dcc4\]:hover,
  html.dark .group:hover .group-hover\:text-\[\#e8dcc4\] {
    color: hsl(var(--foreground)) !important;
  }

  html.dark .text-\[\#e8dcc4\]\/70,
  html.dark .text-\[\#e8dcc4\]\/60,
  html.dark .text-\[\#e8dcc4\]\/50,
  html.dark .hover\:text-\[\#e8dcc4\]\/60:hover,
  html.dark .group:hover .group-hover\:text-\[\#e8dcc4\]\/60 {
    color: hsla(var(--foreground) / 0.9) !important;
  }

  html.dark .text-\[\#e8dcc4\]\/40,
  html.dark .text-\[\#e8dcc4\]\/30,
  html.dark .text-\[\#e8dcc4\]\/50 span,
  html.dark .text-\[\#e8dcc4\]\/30 span {
    color: hsla(var(--foreground) / 0.78) !important;
  }

  html.dark .placeholder\:text-\[\#e8dcc4\]\/50::placeholder,
  html.dark .placeholder\:text-\[\#e8dcc4\]\/40::placeholder,
  html.dark .placeholder\:text-\[\#e8dcc4\]\/30::placeholder {
    color: hsla(var(--foreground) / 0.7) !important;
  }

  html.dark .bg-\[\#e8dcc4\] {
    background-color: hsl(var(--primary)) !important;
    color: hsl(var(--primary-foreground)) !important;
  }

  html.dark .bg-\[\#e8dcc4\]\/5 {
    background-color: hsla(var(--primary) / 0.08) !important;
  }
  html.dark .bg-\[\#e8dcc4\]\/10 {
    background-color: hsla(var(--primary) / 0.15) !important;
  }
  html.dark .bg-\[\#e8dcc4\]\/20 {
    background-color: hsla(var(--primary) / 0.25) !important;
  }
  html.dark .bg-\[\#e8dcc4\]\/30 {
    background-color: hsla(var(--primary) / 0.35) !important;
  }
  html.dark .bg-\[\#e8dcc4\]\/40 {
    background-color: hsla(var(--primary) / 0.45) !important;
  }
  html.dark .bg-\[\#e8dcc4\]\/50 {
    background-color: hsla(var(--primary) / 0.55) !important;
  }

  html.dark .hover\:bg-\[\#e8dcc4\]\/10:hover,
  html.dark .hover\:bg-\[\#e8dcc4\]\/5:hover,
  html.dark .group:hover .group-hover\:bg-\[\#e8dcc4\]\/10 {
    background-color: hsla(var(--primary) / 0.2) !important;
  }

  html.dark .hover\:bg-\[\#e8dcc4\]\/30:hover,
  html.dark .hover\:bg-\[\#e8dcc4\]\/50:hover {
    background-color: hsla(var(--primary) / 0.35) !important;
  }

  html.dark .border-\[\#e8dcc4\],
  html.dark .border-\[\#e8dcc4\]\/40,
  html.dark .border-\[\#e8dcc4\]\/30,
  html.dark .border-\[\#e8dcc4\]\/20,
  html.dark .border-\[\#e8dcc4\]\/10,
  html.dark .group:hover .group-hover\:border-\[\#e8dcc4\],
  html.dark .hover\:border-\[\#e8dcc4\]\/40:hover,
  html.dark .hover\:border-\[\#e8dcc4\]\/50:hover {
    border-color: hsla(var(--primary) / 0.7) !important;
  }

  html.dark .focus\:border-\[\#e8dcc4\]\/40:focus,
  html.dark .focus\:border-\[\#e8dcc4\]\/40:focus-visible {
    border-color: hsla(var(--primary) / 0.8) !important;
  }

  html.dark .focus\:ring-\[\#e8dcc4\]:focus,
  html.dark .focus\:ring-\[\#e8dcc4\]:focus-visible {
    --tw-ring-color: hsl(var(--ring)) !important;
  }

  html.dark .text-\[\#e8dcc4\]\/60 .opacity-70 {
    color: hsla(var(--foreground) / 0.85) !important;
  }
}

/* Hide all scrollbars */
::-webkit-scrollbar {
  width: 0px;
  height: 0px;
  display: none;
}

* {
  scrollbar-width: none;
  -ms-overflow-style: none;
}

/* Smooth scroll behavior */
html {
  scroll-behavior: smooth;
}

/* Optimize image loading */
img {
  content-visibility: auto;
}

/* Make placeholder text fainter for better UX */
::placeholder {
  color: hsl(var(--muted-foreground) / 0.25) !important;
  opacity: 1;
}

input::placeholder,
textarea::placeholder {
  color: hsl(var(--muted-foreground) / 0.25) !important;
  opacity: 1;
}

/* Google Maps InfoWindow overrides to avoid double backgrounds */
.gm-style .gm-style-iw-c {
  padding: 0 !important;
  border-radius: 12px !important;
  box-shadow: none !important;
  background: transparent !important;
}

.gm-style .gm-style-iw-d {
  overflow: visible !important;
}

.gm-style .gm-style-iw-c button.gm-ui-hover-effect {
  top: 10px !important;
  right: 10px !important;
  width: 28px !important;
  height: 28px !important;
  transform: translate(0, 0) !important;
  border-radius: 8px !important;
  background: rgba(0, 0, 0, 0.55) !important;
  box-shadow: none !important;
}

html.dark .gm-style .gm-style-iw-c button.gm-ui-hover-effect {
  background: rgba(255, 255, 255, 0.12) !important;
}

.gm-style .gm-style-iw-c button.gm-ui-hover-effect span {
  width: 12px !important;
  height: 12px !important;
  margin: 8px !important;
}

html.dark .gm-style .gm-style-iw-c button.gm-ui-hover-effect span {
  filter: invert(1);
}

.gm-style .gm-style-iw-t::after,
.gm-style .gm-style-iw-t::before {
  display: none !important;
}

/* Tutorial Highlighting Styles */
@keyframes tutorial-pulse {
  0%, 100% {
    box-shadow: 0 0 0 0 hsl(var(--primary) / 0.9);
  }
  50% {
    box-shadow: 0 0 0 16px hsl(var(--primary) / 0);
  }
}

.tutorial-highlight {
  animation: tutorial-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite !important;
  outline: 4px solid hsl(var(--primary)) !important;
  outline-offset: 6px !important;
  position: relative !important;
  z-index: 9999 !important;
  border-radius: 8px !important;
  scroll-margin: 100px !important;
}

/* Dark mode specific highlight with more contrast */
html.dark .tutorial-highlight {
  outline-color: hsl(45 80% 65%) !important;
  box-shadow: 0 0 0 0 hsl(45 80% 65% / 0.9) !important;
}

@keyframes tutorial-pulse {
  0%, 100% {
    box-shadow: 0 0 0 0 hsl(45 80% 65% / 0.9);
  }
  50% {
    box-shadow: 0 0 0 16px hsl(45 80% 65% / 0);
  }
}

/* Warm mode specific highlight */
html:not(.dark) .tutorial-highlight {
  outline-color: hsl(25 85% 50%) !important;
  box-shadow: 0 0 0 0 hsl(25 85% 50% / 0.9) !important;
}

@keyframes tutorial-pulse-warm {
  0%, 100% {
    box-shadow: 0 0 0 0 hsl(25 85% 50% / 0.9);
  }
  50% {
    box-shadow: 0 0 0 16px hsl(25 85% 50% / 0);
  }
}

html:not(.dark) .tutorial-highlight {
  animation: tutorial-pulse-warm 2s cubic-bezier(0.4, 0, 0.6, 1) infinite !important;
}

/* Tutorial overlay should be above most elements */
[data-tutorial-overlay] {
  z-index: 9998 !important;
}
